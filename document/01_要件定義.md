# SNCライブラリ - グラフィックデザイン：要件定義書

作成日: 2026-02-04

## 1. 目的
画像（グラフィックデザイン）をアップロードし、ジャンル・タグで整理して閲覧できる「ライブラリ」Webアプリを構築する。

## 2. 前提 / 環境
- 開発OS: macOS
- 開発環境: VS Code
- 本番サーバー: Xserver
- テスト環境: Docker
- アプリ方式: Webアプリ
- 実装方式: Laravel 10.x + MySQL
- パッケージ管理: Composer
- ログイン: 当面不要（Xserver側でアクセス制限）。将来、アプリ側ログイン拡張の可能性あり
- アクセス制限: XserverのBasic認証 + アプリ側の簡易パスワード（管理/投稿用）

## 3. 用語
- 画像: ユーザーが登録するファイル（JPEG/PNG/GIF/WebP）
- ジャンル: 画像に紐づく分類（1つ）
- タグ: 画像に紐づくラベル（複数）
- 登録日: 画像をアプリに登録した日（自動付与）
- メモ: 任意のテキスト（1画像につき1つ）

## 4. 機能要件
### 4.1 公開（閲覧）機能
- 画像一覧表示（グリッド）
- ジャンルで絞り込み
- タグで絞り込み（OR条件：選択したいずれかのタグを含む）
- 画像タップ/クリックで拡大表示
  - ライトボックス（モーダル）
  - 前後画像へ移動（左右/ボタン）
  - ズーム対応（ピンチ/ホイール/ボタン）
- ライト/ダークテーマ切替（状態保持）

### 4.2 管理機能（管理ページ）
管理ページはアプリ側簡易パスワードで保護する（Basic認証と併用）。
- 画像アップロード（1枚ずつ、まとめてアップロード不可）
- 画像情報編集（ジャンル/タグ/メモ）
- 画像削除（関連ファイル/関連付けも削除）
- ジャンル管理（追加/編集/削除）
- タグ管理（追加/編集/削除）

### 4.3 画像処理要件
- 受け入れ形式: JPEG/PNG/GIF/WebP
- 画像保存:
  - オリジナルはそのまま保存
  - 表示用画像（Display）とサムネイル（Thumb）を生成
- 4K上限:
  - 表示用画像は長辺4096pxを上限に縮小（それ以下は等倍）
- サムネイル:
  - 縦横比を維持し、長辺512px程度を目安に縮小（数値は実装で定数化）
- アニメーション画像の扱い:
  - オリジナルはアニメのまま保存
  - Display/Thumbは先頭フレームの静止画から生成

## 5. 非機能要件
- UI: シンプルでモダンなデザイン
- パフォーマンス: 一覧はサムネイルを表示し、詳細でDisplay/Originalを使い分ける
- 可用性/運用: Xserver上で運用可能な構成（Apache想定）
- セキュリティ:
  - 管理系操作は簡易パスワード必須（セッション管理）
  - アップロードのMIME/拡張子検証、画像デコードによる安全確認
  - CSRF対策（管理ページ）

## 6. 画面一覧（案）
- `/` 一覧（フィルタ付き）
- `/image/{id}` 詳細（JSライトボックスで代替可）
- `/admin/login` 管理ログイン
- `/admin` 管理ダッシュボード
- `/admin/images` 画像一覧（編集/削除）
- `/admin/images/new` アップロード
- `/admin/images/{id}/edit` 編集
- `/admin/genres` ジャンル管理
- `/admin/tags` タグ管理

## 7. 要確認（実装前に確定したい事項）
- XserverのPHPバージョン（8.1/8.2など）
- 画像処理で `Imagick` 拡張が利用可能か（不可の場合、WebPやアニメ画像処理の一部に制約が出る）
- 想定する同時利用者数/画像件数（数千〜数万の規模感）

